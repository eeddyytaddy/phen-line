{
  "$schema": "https://railway.com/railway.schema.json",
  // （如果你以前有 build / deploy 設定，也可以合併到這裡）
  "services": [
    {
      "name": "phen-line",
      "source": ".",
      "dockerfilePath": "Dockerfile",
      "startCommand": "gunicorn app:app"
    },
    {
      "name": "locust-runner",
      "source": ".",
      "dockerfilePath": "Dockerfile.locust",
      "startCommand": "sh -c 'mkdir -p /data && \
          locust -f /usr/src/app/tests/locustfile.py --headless -u 50 -r 10 -t 1m \
            --csv=/data/run --csv-full-history --stop-timeout 10 || true && \
          echo \"=== /data 檔案列表 ===\" && ls -lh /data && \
          exec sleep infinity'",
      "volumes": [
        {
          "name": "kind-volume",      // 你的 Volume 名稱
          "mountPath": "/data"
        }
      ]
    }
  ]
}
